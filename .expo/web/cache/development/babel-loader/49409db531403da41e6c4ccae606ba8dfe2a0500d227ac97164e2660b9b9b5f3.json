{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\robin\\\\Documents\\\\RpgHybrid\\\\src\\\\screens\\\\SkillTreeScreen.js\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport { collection, doc, getDocs, getDoc, query, where } from 'firebase/firestore';\nimport { db } from '../services/firebase';\nimport { useAuth } from '../contexts/AuthContext';\nimport SkillNode from '../components/SkillNode';\nimport programs from '../data/programs.json';\nimport { colors } from '../theme/colors';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  width: screenWidth,\n  height: screenHeight\n} = Dimensions.get('window');\nconst TREE_WIDTH = 5 * 140;\nconst TREE_HEIGHT = 10 * 160;\nconst NODE_SIZE = 80;\nconst SkillTreeScreen = ({\n  navigation\n}) => {\n  const {\n    user\n  } = useAuth();\n  const userId = user?.uid;\n  const [userProgress, setUserProgress] = useState({});\n  const [completedPrograms, setCompletedPrograms] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [dataLoaded, setDataLoaded] = useState(false);\n  const [selectedProgram, setSelectedProgram] = useState(null);\n  const [modalVisible, setModalVisible] = useState(false);\n  const [userStats, setUserStats] = useState({\n    totalCompleted: 0,\n    totalXP: 0,\n    currentTier: 0\n  });\n  const streetCategory = programs.categories.find(cat => cat.id === 'street');\n  const streetPrograms = streetCategory?.programs || [];\n  const loadUserData = useCallback(async () => {\n    if (!userId) return;\n    try {\n      setLoading(true);\n      const progressQuery = query(collection(db, 'userProgress'), where('userId', '==', userId));\n      const progressSnapshot = await getDocs(progressQuery);\n      const progressData = {};\n      progressSnapshot.forEach(doc => {\n        const data = doc.data();\n        progressData[data.programId] = data;\n      });\n      setUserProgress(progressData);\n      const userDoc = await getDoc(doc(db, 'users', userId));\n      const userData = userDoc.data();\n      const completed = userData?.completedPrograms || [];\n      setCompletedPrograms(completed);\n      const totalCompleted = completed.length;\n      const totalXP = completed.reduce((sum, programId) => {\n        const program = streetPrograms.find(p => p.id === programId);\n        return sum + (program?.xpReward || 0);\n      }, 0);\n      let currentTier = 0;\n      streetPrograms.forEach(program => {\n        const isUnlocked = program.prerequisites.length === 0 || program.prerequisites.every(prereq => completed.includes(prereq));\n        if (isUnlocked && program.position.tier > currentTier) {\n          currentTier = program.position.tier;\n        }\n      });\n      setUserStats({\n        totalCompleted,\n        totalXP,\n        currentTier\n      });\n    } catch (error) {\n      console.error('Erreur lors du chargement des données:', error);\n      Alert.alert('Erreur', 'Impossible de charger vos progrès');\n    } finally {\n      setLoading(false);\n      setDataLoaded(true);\n    }\n  }, [userId]);\n  useEffect(() => {\n    if (userId && !dataLoaded) {\n      loadUserData();\n    }\n  }, [userId]);\n  const getProgramState = useCallback(program => {\n    const isCompleted = completedPrograms.includes(program.id);\n    const isUnlocked = program.prerequisites.length === 0 || program.prerequisites.every(prereq => completedPrograms.includes(prereq));\n    const progress = userProgress[program.id];\n    const hasProgress = progress && progress.currentLevel > 0;\n    if (isCompleted) return 'COMPLETED';\n    if (hasProgress) return 'IN_PROGRESS';\n    if (isUnlocked) return 'UNLOCKED';\n    return 'LOCKED';\n  }, [completedPrograms, userProgress]);\n  const handleNodePress = useCallback(program => {\n    const state = getProgramState(program);\n    if (state === 'LOCKED') {\n      const missingPrereqs = program.prerequisites.filter(prereq => !completedPrograms.includes(prereq));\n      const missingNames = missingPrereqs.map(id => {\n        const prereqProgram = streetPrograms.find(p => p.id === id);\n        return prereqProgram?.name || id;\n      });\n      Alert.alert('🔒 Programme verrouillé', `Vous devez d'abord compléter :\\n${missingNames.join('\\n')}`, [{\n        text: 'OK'\n      }]);\n      return;\n    }\n    navigation.navigate('ProgramDetail', {\n      program,\n      category: streetCategory,\n      userProgress: userProgress[program.id]\n    });\n  }, [getProgramState, completedPrograms, streetPrograms, navigation, streetCategory, userProgress]);\n  const handleNodeLongPress = useCallback(program => {\n    setSelectedProgram(program);\n    setModalVisible(true);\n  }, []);\n  const calculateConnectionLine = useCallback((fromProgram, toProgram) => {\n    const fromX = fromProgram.position.x * 140 + NODE_SIZE / 2;\n    const fromY = fromProgram.position.y * 160 + NODE_SIZE / 2;\n    const toX = toProgram.position.x * 140 + NODE_SIZE / 2;\n    const toY = toProgram.position.y * 160 + NODE_SIZE / 2;\n    const deltaX = toX - fromX;\n    const deltaY = toY - fromY;\n    const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n    const angle = Math.atan2(deltaY, deltaX) * (180 / Math.PI);\n    return {\n      left: fromX,\n      top: fromY,\n      width: distance,\n      transform: [{\n        rotate: `${angle}deg`\n      }],\n      transformOrigin: '0 50%'\n    };\n  }, []);\n  const renderConnections = useCallback(() => {\n    const connections = [];\n    streetPrograms.forEach((program, index) => {\n      if (program.unlocks && program.unlocks.length > 0) {\n        program.unlocks.forEach(unlockedId => {\n          const unlockedProgram = streetPrograms.find(p => p.id === unlockedId);\n          if (unlockedProgram) {\n            const lineStyle = calculateConnectionLine(program, unlockedProgram);\n            const toState = getProgramState(unlockedProgram);\n            const opacity = toState === 'LOCKED' ? 0.2 : 0.5;\n            connections.push(_jsxDEV(View, {\n              style: [styles.connectionLine, {\n                left: lineStyle.left,\n                top: lineStyle.top,\n                width: lineStyle.width,\n                transform: lineStyle.transform,\n                opacity\n              }]\n            }, `${program.id}-${unlockedId}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 15\n            }, this));\n          }\n        });\n      }\n    });\n    return connections;\n  }, [streetPrograms, calculateConnectionLine, getProgramState]);\n  const renderModal = () => {\n    if (!selectedProgram) return null;\n    const prereqNames = selectedProgram.prerequisites.map(id => {\n      const prereqProgram = streetPrograms.find(p => p.id === id);\n      return prereqProgram?.name || id;\n    });\n    const unlockNames = selectedProgram.unlocks?.map(id => {\n      const unlockProgram = streetPrograms.find(p => p.id === id);\n      return unlockProgram?.name || id;\n    }) || [];\n    return _jsxDEV(Modal, {\n      visible: modalVisible,\n      transparent: true,\n      animationType: \"fade\",\n      onRequestClose: () => setModalVisible(false),\n      children: _jsxDEV(View, {\n        style: styles.modalOverlay,\n        children: _jsxDEV(View, {\n          style: styles.modalContent,\n          children: [_jsxDEV(Text, {\n            style: styles.modalTitle,\n            children: [selectedProgram.icon, \" \", selectedProgram.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 13\n          }, this), _jsxDEV(Text, {\n            style: styles.modalDifficulty,\n            children: [\"Difficult\\xE9: \", selectedProgram.difficulty]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this), _jsxDEV(Text, {\n            style: styles.modalDescription,\n            children: selectedProgram.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this), _jsxDEV(View, {\n            style: styles.modalSection,\n            children: [_jsxDEV(Text, {\n              style: styles.modalSectionTitle,\n              children: \"\\uD83D\\uDCCA Informations\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 15\n            }, this), _jsxDEV(Text, {\n              style: styles.modalText,\n              children: [\"Dur\\xE9e: \", selectedProgram.totalWeeks, \" semaines\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 15\n            }, this), _jsxDEV(Text, {\n              style: styles.modalText,\n              children: [\"R\\xE9compense XP: \", selectedProgram.xpReward]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 15\n            }, this), _jsxDEV(Text, {\n              style: styles.modalText,\n              children: [\"Tier: \", selectedProgram.position.tier]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 13\n          }, this), prereqNames.length > 0 && _jsxDEV(View, {\n            style: styles.modalSection,\n            children: [_jsxDEV(Text, {\n              style: styles.modalSectionTitle,\n              children: \"\\uD83D\\uDD12 Pr\\xE9requis\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 17\n            }, this), prereqNames.map(name => _jsxDEV(Text, {\n              style: styles.modalText,\n              children: [\"\\u2022 \", name]\n            }, name, true, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 15\n          }, this), unlockNames.length > 0 && _jsxDEV(View, {\n            style: styles.modalSection,\n            children: [_jsxDEV(Text, {\n              style: styles.modalSectionTitle,\n              children: \"\\uD83D\\uDD13 D\\xE9bloque\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 17\n            }, this), unlockNames.map(name => _jsxDEV(Text, {\n              style: styles.modalText,\n              children: [\"\\u2022 \", name]\n            }, name, true, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 15\n          }, this), _jsxDEV(TouchableOpacity, {\n            style: styles.modalCloseButton,\n            onPress: () => setModalVisible(false),\n            children: _jsxDEV(Text, {\n              style: styles.modalCloseText,\n              children: \"Fermer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }, this);\n  };\n  if (loading) {\n    return _jsxDEV(View, {\n      style: styles.loadingContainer,\n      children: [_jsxDEV(ActivityIndicator, {\n        size: \"large\",\n        color: colors.primary\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: styles.loadingText,\n        children: \"Chargement de votre arbre...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this);\n  }\n  return _jsxDEV(SafeAreaView, {\n    style: styles.container,\n    children: [_jsxDEV(View, {\n      style: styles.header,\n      children: [_jsxDEV(Text, {\n        style: styles.headerTitle,\n        children: \"\\uD83C\\uDFCB\\uFE0F Street Workout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: styles.statsContainer,\n        children: _jsxDEV(Text, {\n          style: styles.statsText,\n          children: [userStats.totalCompleted, \"/\", streetPrograms.length, \" \\u2022 \", userStats.totalXP, \" XP \\u2022 Tier \", userStats.currentTier]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this), _jsxDEV(ScrollView, {\n      horizontal: true,\n      showsHorizontalScrollIndicator: false,\n      contentContainerStyle: {\n        minWidth: TREE_WIDTH\n      },\n      style: styles.horizontalScroll,\n      children: _jsxDEV(ScrollView, {\n        showsVerticalScrollIndicator: false,\n        contentContainerStyle: {\n          minHeight: TREE_HEIGHT\n        },\n        style: styles.verticalScroll,\n        children: _jsxDEV(View, {\n          style: styles.treeContainer,\n          children: [renderConnections(), streetPrograms.map(program => {\n            const state = getProgramState(program);\n            const progress = userProgress[program.id];\n            return _jsxDEV(View, {\n              style: [styles.nodeContainer, {\n                left: program.position.x * 140,\n                top: program.position.y * 160\n              }],\n              children: _jsxDEV(SkillNode, {\n                program: program,\n                state: state,\n                progress: progress,\n                onPress: () => handleNodePress(program),\n                onLongPress: () => handleNodeLongPress(program)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 19\n              }, this)\n            }, program.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 17\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: styles.legend,\n      children: [_jsxDEV(View, {\n        style: styles.legendRow,\n        children: [_jsxDEV(Text, {\n          style: styles.legendItem,\n          children: \"\\uD83D\\uDD12 Verrouill\\xE9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this), _jsxDEV(Text, {\n          style: styles.legendItem,\n          children: \"\\uD83D\\uDFE2 Disponible\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: styles.legendRow,\n        children: [_jsxDEV(Text, {\n          style: styles.legendItem,\n          children: \"\\uD83D\\uDFE1 En cours\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this), _jsxDEV(Text, {\n          style: styles.legendItem,\n          children: \"\\u2705 Compl\\xE9t\\xE9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 7\n    }, this), renderModal()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 303,\n    columnNumber: 5\n  }, this);\n};\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.background\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: colors.background\n  },\n  loadingText: {\n    color: colors.textPrimary,\n    marginTop: 16,\n    fontSize: 16\n  },\n  header: {\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: colors.border\n  },\n  headerTitle: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: 8\n  },\n  statsContainer: {\n    alignItems: 'center'\n  },\n  statsText: {\n    fontSize: 14,\n    color: colors.textSecondary\n  },\n  horizontalScroll: {\n    flex: 1\n  },\n  verticalScroll: {\n    flex: 1\n  },\n  treeContainer: {\n    width: TREE_WIDTH,\n    height: TREE_HEIGHT,\n    position: 'relative'\n  },\n  nodeContainer: {\n    position: 'absolute',\n    width: NODE_SIZE,\n    height: NODE_SIZE\n  },\n  connectionLine: {\n    position: 'absolute',\n    height: 2,\n    backgroundColor: '#444',\n    zIndex: 1\n  },\n  legend: {\n    padding: 16,\n    borderTopWidth: 1,\n    borderTopColor: colors.border,\n    backgroundColor: colors.surface\n  },\n  legendRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 4\n  },\n  legendItem: {\n    fontSize: 12,\n    color: colors.textSecondary\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.8)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20\n  },\n  modalContent: {\n    backgroundColor: colors.surface,\n    borderRadius: 16,\n    padding: 24,\n    maxWidth: '90%',\n    maxHeight: '80%'\n  },\n  modalTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    textAlign: 'center',\n    marginBottom: 8\n  },\n  modalDifficulty: {\n    fontSize: 14,\n    color: colors.accent,\n    textAlign: 'center',\n    marginBottom: 16\n  },\n  modalDescription: {\n    fontSize: 14,\n    color: colors.textSecondary,\n    textAlign: 'center',\n    marginBottom: 20,\n    lineHeight: 20\n  },\n  modalSection: {\n    marginBottom: 16\n  },\n  modalSectionTitle: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: colors.textPrimary,\n    marginBottom: 8\n  },\n  modalText: {\n    fontSize: 14,\n    color: colors.textSecondary,\n    marginBottom: 4\n  },\n  modalCloseButton: {\n    backgroundColor: colors.primary,\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    alignItems: 'center',\n    marginTop: 16\n  },\n  modalCloseText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: '600'\n  }\n});\nexport default SkillTreeScreen;","map":{"version":3,"names":["React","useState","useEffect","useCallback","View","Text","ScrollView","Dimensions","StyleSheet","Alert","TouchableOpacity","Modal","ActivityIndicator","SafeAreaView","collection","doc","getDocs","getDoc","query","where","db","useAuth","SkillNode","programs","colors","jsxDEV","_jsxDEV","width","screenWidth","height","screenHeight","get","TREE_WIDTH","TREE_HEIGHT","NODE_SIZE","SkillTreeScreen","navigation","user","userId","uid","userProgress","setUserProgress","completedPrograms","setCompletedPrograms","loading","setLoading","dataLoaded","setDataLoaded","selectedProgram","setSelectedProgram","modalVisible","setModalVisible","userStats","setUserStats","totalCompleted","totalXP","currentTier","streetCategory","categories","find","cat","id","streetPrograms","loadUserData","progressQuery","progressSnapshot","progressData","forEach","data","programId","userDoc","userData","completed","length","reduce","sum","program","p","xpReward","isUnlocked","prerequisites","every","prereq","includes","position","tier","error","console","alert","getProgramState","isCompleted","progress","hasProgress","currentLevel","handleNodePress","state","missingPrereqs","filter","missingNames","map","prereqProgram","name","join","text","navigate","category","handleNodeLongPress","calculateConnectionLine","fromProgram","toProgram","fromX","x","fromY","y","toX","toY","deltaX","deltaY","distance","Math","sqrt","angle","atan2","PI","left","top","transform","rotate","transformOrigin","renderConnections","connections","index","unlocks","unlockedId","unlockedProgram","lineStyle","toState","opacity","push","style","styles","connectionLine","fileName","_jsxFileName","lineNumber","columnNumber","renderModal","prereqNames","unlockNames","unlockProgram","visible","transparent","animationType","onRequestClose","children","modalOverlay","modalContent","modalTitle","icon","modalDifficulty","difficulty","modalDescription","description","modalSection","modalSectionTitle","modalText","totalWeeks","modalCloseButton","onPress","modalCloseText","loadingContainer","size","color","primary","loadingText","container","header","headerTitle","statsContainer","statsText","horizontal","showsHorizontalScrollIndicator","contentContainerStyle","minWidth","horizontalScroll","showsVerticalScrollIndicator","minHeight","verticalScroll","treeContainer","nodeContainer","onLongPress","legend","legendRow","legendItem","create","flex","backgroundColor","background","justifyContent","alignItems","textPrimary","marginTop","fontSize","padding","borderBottomWidth","borderBottomColor","border","fontWeight","textAlign","marginBottom","textSecondary","zIndex","borderTopWidth","borderTopColor","surface","flexDirection","borderRadius","maxWidth","maxHeight","accent","lineHeight","paddingVertical","paddingHorizontal"],"sources":["C:/Users/robin/Documents/RpgHybrid/src/screens/SkillTreeScreen.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  ScrollView,\r\n  Dimensions,\r\n  StyleSheet,\r\n  Alert,\r\n  TouchableOpacity,\r\n  Modal,\r\n  ActivityIndicator,\r\n  SafeAreaView\r\n} from 'react-native';\r\nimport { collection, doc, getDocs, getDoc, query, where } from 'firebase/firestore';\r\nimport { db } from '../services/firebase';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport SkillNode from '../components/SkillNode';\r\nimport programs from '../data/programs.json';\r\nimport { colors } from '../theme/colors';\r\n\r\nconst { width: screenWidth, height: screenHeight } = Dimensions.get('window');\r\n\r\n// Dimensions de l'arbre\r\nconst TREE_WIDTH = 5 * 140; // 5 colonnes × 140px\r\nconst TREE_HEIGHT = 10 * 160; // 10 tiers × 160px\r\nconst NODE_SIZE = 80;\r\n\r\nconst SkillTreeScreen = ({ navigation }) => {\r\n  const { user } = useAuth();\r\n  const userId = user?.uid;\r\n  const [userProgress, setUserProgress] = useState({});\r\n  const [completedPrograms, setCompletedPrograms] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [dataLoaded, setDataLoaded] = useState(false);\r\n  const [selectedProgram, setSelectedProgram] = useState(null);\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [userStats, setUserStats] = useState({\r\n    totalCompleted: 0,\r\n    totalXP: 0,\r\n    currentTier: 0\r\n  });\r\n\r\n  // Récupère la catégorie Street Workout\r\n  const streetCategory = programs.categories.find(cat => cat.id === 'street');\r\n  const streetPrograms = streetCategory?.programs || [];\r\n\r\n  // Charge les données utilisateur\r\n  const loadUserData = useCallback(async () => {\r\n    if (!userId) return;\r\n\r\n    try {\r\n      setLoading(true);\r\n\r\n      // Charge les progrès utilisateur\r\n      const progressQuery = query(\r\n        collection(db, 'userProgress'),\r\n        where('userId', '==', userId)\r\n      );\r\n      const progressSnapshot = await getDocs(progressQuery);\r\n      const progressData = {};\r\n      progressSnapshot.forEach(doc => {\r\n        const data = doc.data();\r\n        progressData[data.programId] = data;\r\n      });\r\n      setUserProgress(progressData);\r\n\r\n      // Charge les programmes complétés\r\n      const userDoc = await getDoc(doc(db, 'users', userId));\r\n      const userData = userDoc.data();\r\n      const completed = userData?.completedPrograms || [];\r\n      setCompletedPrograms(completed);\r\n\r\n      // Calcule les statistiques\r\n      const totalCompleted = completed.length;\r\n      const totalXP = completed.reduce((sum, programId) => {\r\n        const program = streetPrograms.find(p => p.id === programId);\r\n        return sum + (program?.xpReward || 0);\r\n      }, 0);\r\n\r\n      // Calcule le tier actuel (le plus haut tier débloqué)\r\n      let currentTier = 0;\r\n      streetPrograms.forEach(program => {\r\n        const isUnlocked = program.prerequisites.length === 0 || \r\n          program.prerequisites.every(prereq => completed.includes(prereq));\r\n        if (isUnlocked && program.position.tier > currentTier) {\r\n          currentTier = program.position.tier;\r\n        }\r\n      });\r\n\r\n      setUserStats({\r\n        totalCompleted,\r\n        totalXP,\r\n        currentTier\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Erreur lors du chargement des données:', error);\r\n      Alert.alert('Erreur', 'Impossible de charger vos progrès');\r\n    } finally {\r\n      setLoading(false);\r\n      setDataLoaded(true);\r\n    }\r\n  }, [userId]);\r\n\r\n  useEffect(() => {\r\n    if (userId && !dataLoaded) {\r\n      loadUserData();\r\n    }\r\n  }, [userId]);\r\n\r\n  // Détermine l'état d'un programme\r\n  const getProgramState = useCallback((program) => {\r\n    const isCompleted = completedPrograms.includes(program.id);\r\n    const isUnlocked = program.prerequisites.length === 0 || \r\n      program.prerequisites.every(prereq => completedPrograms.includes(prereq));\r\n    const progress = userProgress[program.id];\r\n    const hasProgress = progress && progress.currentLevel > 0;\r\n\r\n    if (isCompleted) return 'COMPLETED';\r\n    if (hasProgress) return 'IN_PROGRESS';\r\n    if (isUnlocked) return 'UNLOCKED';\r\n    return 'LOCKED';\r\n  }, [completedPrograms, userProgress]);\r\n\r\n  // Gère le tap sur un nœud\r\n  const handleNodePress = useCallback((program) => {\r\n    const state = getProgramState(program);\r\n    \r\n    if (state === 'LOCKED') {\r\n      const missingPrereqs = program.prerequisites.filter(\r\n        prereq => !completedPrograms.includes(prereq)\r\n      );\r\n      const missingNames = missingPrereqs.map(id => {\r\n        const prereqProgram = streetPrograms.find(p => p.id === id);\r\n        return prereqProgram?.name || id;\r\n      });\r\n\r\n      Alert.alert(\r\n        '🔒 Programme verrouillé',\r\n        `Vous devez d'abord compléter :\\n${missingNames.join('\\n')}`,\r\n        [{ text: 'OK' }]\r\n      );\r\n      return;\r\n    }\r\n\r\n    // Navigation vers le détail du programme\r\n    navigation.navigate('ProgramDetail', {\r\n      program,\r\n      category: streetCategory,\r\n      userProgress: userProgress[program.id]\r\n    });\r\n  }, [getProgramState, completedPrograms, streetPrograms, navigation, streetCategory, userProgress]);\r\n\r\n  // Gère le long press sur un nœud\r\n  const handleNodeLongPress = useCallback((program) => {\r\n    setSelectedProgram(program);\r\n    setModalVisible(true);\r\n  }, []);\r\n\r\n  // Calcule la position d'une ligne entre deux nœuds\r\n  const calculateConnectionLine = useCallback((fromProgram, toProgram) => {\r\n    const fromX = fromProgram.position.x * 140 + NODE_SIZE / 2;\r\n    const fromY = fromProgram.position.y * 160 + NODE_SIZE / 2;\r\n    const toX = toProgram.position.x * 140 + NODE_SIZE / 2;\r\n    const toY = toProgram.position.y * 160 + NODE_SIZE / 2;\r\n\r\n    const deltaX = toX - fromX;\r\n    const deltaY = toY - fromY;\r\n    const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\r\n    const angle = Math.atan2(deltaY, deltaX) * (180 / Math.PI);\r\n\r\n    return {\r\n      left: fromX,\r\n      top: fromY,\r\n      width: distance,\r\n      transform: [{ rotate: `${angle}deg` }],\r\n      transformOrigin: '0 50%'\r\n    };\r\n  }, []);\r\n\r\n  // Rend les connexions entre les nœuds\r\n  const renderConnections = useCallback(() => {\r\n    const connections = [];\r\n\r\n    streetPrograms.forEach((program, index) => {\r\n      if (program.unlocks && program.unlocks.length > 0) {\r\n        program.unlocks.forEach(unlockedId => {\r\n          const unlockedProgram = streetPrograms.find(p => p.id === unlockedId);\r\n          if (unlockedProgram) {\r\n            const lineStyle = calculateConnectionLine(program, unlockedProgram);\r\n            const toState = getProgramState(unlockedProgram);\r\n            const opacity = toState === 'LOCKED' ? 0.2 : 0.5;\r\n\r\n            connections.push(\r\n              <View\r\n                key={`${program.id}-${unlockedId}`}\r\n                style={[\r\n                  styles.connectionLine,\r\n                  {\r\n                    left: lineStyle.left,\r\n                    top: lineStyle.top,\r\n                    width: lineStyle.width,\r\n                    transform: lineStyle.transform,\r\n                    opacity\r\n                  }\r\n                ]}\r\n              />\r\n            );\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    return connections;\r\n  }, [streetPrograms, calculateConnectionLine, getProgramState]);\r\n\r\n  // Modal de détails\r\n  const renderModal = () => {\r\n    if (!selectedProgram) return null;\r\n\r\n    const prereqNames = selectedProgram.prerequisites.map(id => {\r\n      const prereqProgram = streetPrograms.find(p => p.id === id);\r\n      return prereqProgram?.name || id;\r\n    });\r\n\r\n    const unlockNames = selectedProgram.unlocks?.map(id => {\r\n      const unlockProgram = streetPrograms.find(p => p.id === id);\r\n      return unlockProgram?.name || id;\r\n    }) || [];\r\n\r\n    return (\r\n      <Modal\r\n        visible={modalVisible}\r\n        transparent\r\n        animationType=\"fade\"\r\n        onRequestClose={() => setModalVisible(false)}\r\n      >\r\n        <View style={styles.modalOverlay}>\r\n          <View style={styles.modalContent}>\r\n            <Text style={styles.modalTitle}>\r\n              {selectedProgram.icon} {selectedProgram.name}\r\n            </Text>\r\n            <Text style={styles.modalDifficulty}>\r\n              Difficulté: {selectedProgram.difficulty}\r\n            </Text>\r\n            <Text style={styles.modalDescription}>\r\n              {selectedProgram.description}\r\n            </Text>\r\n            \r\n            <View style={styles.modalSection}>\r\n              <Text style={styles.modalSectionTitle}>📊 Informations</Text>\r\n              <Text style={styles.modalText}>\r\n                Durée: {selectedProgram.totalWeeks} semaines\r\n              </Text>\r\n              <Text style={styles.modalText}>\r\n                Récompense XP: {selectedProgram.xpReward}\r\n              </Text>\r\n              <Text style={styles.modalText}>\r\n                Tier: {selectedProgram.position.tier}\r\n              </Text>\r\n            </View>\r\n\r\n            {prereqNames.length > 0 && (\r\n              <View style={styles.modalSection}>\r\n                <Text style={styles.modalSectionTitle}>🔒 Prérequis</Text>\r\n                {prereqNames.map(name => (\r\n                  <Text key={name} style={styles.modalText}>• {name}</Text>\r\n                ))}\r\n              </View>\r\n            )}\r\n\r\n            {unlockNames.length > 0 && (\r\n              <View style={styles.modalSection}>\r\n                <Text style={styles.modalSectionTitle}>🔓 Débloque</Text>\r\n                {unlockNames.map(name => (\r\n                  <Text key={name} style={styles.modalText}>• {name}</Text>\r\n                ))}\r\n              </View>\r\n            )}\r\n\r\n            <TouchableOpacity\r\n              style={styles.modalCloseButton}\r\n              onPress={() => setModalVisible(false)}\r\n            >\r\n              <Text style={styles.modalCloseText}>Fermer</Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n        </View>\r\n      </Modal>\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <View style={styles.loadingContainer}>\r\n        <ActivityIndicator size=\"large\" color={colors.primary} />\r\n        <Text style={styles.loadingText}>Chargement de votre arbre...</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <SafeAreaView style={styles.container}>\r\n      {/* Header */}\r\n      <View style={styles.header}>\r\n        <Text style={styles.headerTitle}>🏋️ Street Workout</Text>\r\n        <View style={styles.statsContainer}>\r\n          <Text style={styles.statsText}>\r\n            {userStats.totalCompleted}/{streetPrograms.length} • {userStats.totalXP} XP • Tier {userStats.currentTier}\r\n          </Text>\r\n        </View>\r\n      </View>\r\n\r\n      {/* Arbre de compétences */}\r\n      <ScrollView\r\n        horizontal\r\n        showsHorizontalScrollIndicator={false}\r\n        contentContainerStyle={{ minWidth: TREE_WIDTH }}\r\n        style={styles.horizontalScroll}\r\n      >\r\n        <ScrollView\r\n          showsVerticalScrollIndicator={false}\r\n          contentContainerStyle={{ minHeight: TREE_HEIGHT }}\r\n          style={styles.verticalScroll}\r\n        >\r\n          <View style={styles.treeContainer}>\r\n            {/* Connexions */}\r\n            {renderConnections()}\r\n\r\n            {/* Nœuds */}\r\n            {streetPrograms.map(program => {\r\n              const state = getProgramState(program);\r\n              const progress = userProgress[program.id];\r\n              \r\n              return (\r\n                <View\r\n                  key={program.id}\r\n                  style={[\r\n                    styles.nodeContainer,\r\n                    {\r\n                      left: program.position.x * 140,\r\n                      top: program.position.y * 160\r\n                    }\r\n                  ]}\r\n                >\r\n                  <SkillNode\r\n                    program={program}\r\n                    state={state}\r\n                    progress={progress}\r\n                    onPress={() => handleNodePress(program)}\r\n                    onLongPress={() => handleNodeLongPress(program)}\r\n                  />\r\n                </View>\r\n              );\r\n            })}\r\n          </View>\r\n        </ScrollView>\r\n      </ScrollView>\r\n\r\n      {/* Légende */}\r\n      <View style={styles.legend}>\r\n        <View style={styles.legendRow}>\r\n          <Text style={styles.legendItem}>🔒 Verrouillé</Text>\r\n          <Text style={styles.legendItem}>🟢 Disponible</Text>\r\n        </View>\r\n        <View style={styles.legendRow}>\r\n          <Text style={styles.legendItem}>🟡 En cours</Text>\r\n          <Text style={styles.legendItem}>✅ Complété</Text>\r\n        </View>\r\n      </View>\r\n\r\n      {/* Modal */}\r\n      {renderModal()}\r\n    </SafeAreaView>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: colors.background\r\n  },\r\n  loadingContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: colors.background\r\n  },\r\n  loadingText: {\r\n    color: colors.textPrimary,\r\n    marginTop: 16,\r\n    fontSize: 16\r\n  },\r\n  header: {\r\n    padding: 16,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: colors.border\r\n  },\r\n  headerTitle: {\r\n    fontSize: 24,\r\n    fontWeight: 'bold',\r\n    color: colors.textPrimary,\r\n    textAlign: 'center',\r\n    marginBottom: 8\r\n  },\r\n  statsContainer: {\r\n    alignItems: 'center'\r\n  },\r\n  statsText: {\r\n    fontSize: 14,\r\n    color: colors.textSecondary\r\n  },\r\n  horizontalScroll: {\r\n    flex: 1\r\n  },\r\n  verticalScroll: {\r\n    flex: 1\r\n  },\r\n  treeContainer: {\r\n    width: TREE_WIDTH,\r\n    height: TREE_HEIGHT,\r\n    position: 'relative'\r\n  },\r\n  nodeContainer: {\r\n    position: 'absolute',\r\n    width: NODE_SIZE,\r\n    height: NODE_SIZE\r\n  },\r\n  connectionLine: {\r\n    position: 'absolute',\r\n    height: 2,\r\n    backgroundColor: '#444',\r\n    zIndex: 1\r\n  },\r\n  legend: {\r\n    padding: 16,\r\n    borderTopWidth: 1,\r\n    borderTopColor: colors.border,\r\n    backgroundColor: colors.surface\r\n  },\r\n  legendRow: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-around',\r\n    marginBottom: 4\r\n  },\r\n  legendItem: {\r\n    fontSize: 12,\r\n    color: colors.textSecondary\r\n  },\r\n  modalOverlay: {\r\n    flex: 1,\r\n    backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: 20\r\n  },\r\n  modalContent: {\r\n    backgroundColor: colors.surface,\r\n    borderRadius: 16,\r\n    padding: 24,\r\n    maxWidth: '90%',\r\n    maxHeight: '80%'\r\n  },\r\n  modalTitle: {\r\n    fontSize: 20,\r\n    fontWeight: 'bold',\r\n    color: colors.textPrimary,\r\n    textAlign: 'center',\r\n    marginBottom: 8\r\n  },\r\n  modalDifficulty: {\r\n    fontSize: 14,\r\n    color: colors.accent,\r\n    textAlign: 'center',\r\n    marginBottom: 16\r\n  },\r\n  modalDescription: {\r\n    fontSize: 14,\r\n    color: colors.textSecondary,\r\n    textAlign: 'center',\r\n    marginBottom: 20,\r\n    lineHeight: 20\r\n  },\r\n  modalSection: {\r\n    marginBottom: 16\r\n  },\r\n  modalSectionTitle: {\r\n    fontSize: 16,\r\n    fontWeight: 'bold',\r\n    color: colors.textPrimary,\r\n    marginBottom: 8\r\n  },\r\n  modalText: {\r\n    fontSize: 14,\r\n    color: colors.textSecondary,\r\n    marginBottom: 4\r\n  },\r\n  modalCloseButton: {\r\n    backgroundColor: colors.primary,\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 24,\r\n    borderRadius: 8,\r\n    alignItems: 'center',\r\n    marginTop: 16\r\n  },\r\n  modalCloseText: {\r\n    color: 'white',\r\n    fontSize: 16,\r\n    fontWeight: '600'\r\n  }\r\n});\r\n\r\nexport default SkillTreeScreen;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}